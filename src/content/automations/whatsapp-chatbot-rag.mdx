---
name: "Business WhatsApp AI RAG Chatbot"
category: "ai-intelligent"
types:
  - "chatbot-ai-support"
  - "data-enrichment"
workflowFile: "/workflows/whatsapp-chatbot-rag.json"
nodes:
  - "When clicking ‘Test workflow’"
  - "Create collection"
  - "Refresh collection"
  - "Get folder"
  - "Download Files"
  - "Embeddings OpenAI"
  - "Default Data Loader"
  - "Token Splitter"
  - "Qdrant Vector Store"
  - "Verify"
  - "Respond"
  - "Respond to Webhook"
  - "is Message?"
  - "Only message"
  - "AI Agent"
  - "OpenAI Chat Model"
  - "Window Buffer Memory"
  - "Send"
integrations: ['whatsapp', 'openai', 'qdrant', 'google drive']
triggerNode: "Verify"
featured: false
createdAt: 2025-09-21T23:01:21.000Z
---

## Purpose & Benefits

This advanced automation creates a powerful, AI-driven WhatsApp chatbot that uses a private knowledge base to answer customer questions. It leverages Retrieval-Augmented Generation (RAG) by connecting a vector database (**Qdrant**) to a private document repository (**Google Drive**). This allows the chatbot to provide accurate, context-aware responses to inquiries about products, troubleshooting, and customer service, significantly improving support efficiency.

### Key Features:
* **Private Knowledge Base:** The RAG system uses your own documents to provide answers, ensuring accuracy and brand consistency.
* **Intelligent AI Agent:** The AI is configured with a custom persona and guidelines to act as a professional electronics store assistant.
* **Scalable Vector Search:** The workflow uses a Qdrant vector database to efficiently search through a large volume of documents.
* **Two-Part Workflow:** The automation includes a dedicated setup path for building the knowledge base and a live path for handling customer inquiries.

---

## Trigger

This workflow has a dual trigger to manage its two main functions.

1.  **Knowledge Base Setup (`When clicking ‘Test workflow’`):** This is a manual trigger used to run the RAG pipeline. It initializes the vector database and populates it with documents from Google Drive.
2.  **Live Chatbot (`Verify` webhook):** This is the live trigger that listens for incoming messages from WhatsApp. It is part of the webhook verification process required by Meta for WhatsApp Business accounts.

## Workflow Steps & Logic

The workflow is divided into two distinct logical paths:

### Path 1: Knowledge Base Setup (Manual)
1.  **Create/Refresh Collection:** The workflow starts by creating or refreshing a collection in the Qdrant vector database.
2.  **Document Retrieval:** It then retrieves all documents (e.g., product manuals, FAQs) from a specified Google Drive folder.
3.  **Vectorization:** The documents are downloaded, broken into smaller chunks by the **`Token Splitter`**, and then converted into numerical vectors by the **`Embeddings OpenAI`** node.
4.  **Store in Qdrant:** Finally, the vectors are stored in the Qdrant database, creating the searchable knowledge base.

### Path 2: Live Chatbot (Webhook)
1.  **Receive Message (`Respond` webhook):** The workflow receives a POST request from WhatsApp containing a new customer message.
2.  **Verify Message Type (`is Message?` node):** An `if` node checks if the payload contains a text message. If the message type is not supported, it sends a default "text messages only" response.
3.  **AI Agent Response (`AI Agent` node):** This is the core of the chatbot. It uses the customer's text message as input, along with a detailed system prompt defining its persona and role. Crucially, it uses the vectorized knowledge base to retrieve relevant information and compose a helpful, context-aware response.
4.  **Send Message (`Send` node):** The final, human-like response generated by the AI is sent back to the customer via WhatsApp.

## Credentials Required

This automation requires the following credentials to be configured in your n8n instance:

* **WhatsApp API:** To set up the webhook for receiving messages and to send responses.
* **OpenAI API:** To generate embeddings for the RAG system and to power the AI agent's chat model.
* **Qdrant API:** To connect to your Qdrant vector database for storing and retrieving document vectors.
* **Google Drive OAuth2 API:** To access and download your knowledge base documents.

---



